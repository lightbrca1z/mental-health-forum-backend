# Railway用SQLite設定のまとめ

RailwayでSQLiteを使用するための設定ファイルを作成しました：

### 作成したファイル：
1. **`railway-sqlite-production.env`** - Railway本番環境用の環境変数設定
2. **`RAILWAY_SQLITE_SETUP.md`** - 詳細な設定手順書

### Railwayでの設定手順：

#### 1. 環境変数の設定
Railwayのダッシュボードで「Variables」タブを開き、以下の必須設定を追加：

```
APP_NAME="Mental Health Forum"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://mental-health-forum-backend-production.up.railway.app

# データベース設定（SQLite）
DB_CONNECTION=sqlite
DB_DATABASE=/var/www/database/database.sqlite

# セッション設定
SESSION_DRIVER=file
SESSION_LIFETIME=120

# キャッシュ設定
CACHE_DRIVER=file

# ファイルシステム設定
FILESYSTEM_DISK=local

# ログ設定
LOG_CHANNEL=stack
LOG_LEVEL=error

# メール設定
MAIL_MAILER=smtp
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="noreply@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# ブロードキャスト設定
BROADCAST_DRIVER=log

# キュー設定
QUEUE_CONNECTION=sync
```

#### 2. Dockerfileの設定
Railwayの「Settings」タブで、以下のいずれかを使用：

**推奨設定:**
```
docker build -f Dockerfile.sqlite-final -t mental-health-forum-backend .
```

**簡単設定:**
```
docker build -f Dockerfile.sqlite-simple -t mental-health-forum-backend .
```

#### 3. データベース永続化（推奨）
Railwayで「New」→「Storage」を選択してストレージを作成し、環境変数に追加：
```
RAILWAY_STORAGE_MOUNT_PATH=/var/www/database
```

これらの設定により、RailwayでSQLiteを使用したアプリケーションが正常に動作するはずです。 